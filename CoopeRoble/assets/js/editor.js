/*!
 * http://suyati.github.io/line-control
 * LineControl 1.1.0
 * Copyright (C) 2014, Suyati Technologies
 * This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
You should have received a copy of the GNU General Public License along with this library; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 *
*/

!function(t){var e,a={saveSelection:function(){t(this).data("editor").focus(),window.getSelection?(sel=window.getSelection()).getRangeAt&&sel.rangeCount&&t(this).data("currentRange",sel.getRangeAt(0)):document.selection&&document.selection.createRange?t(this).data("currentRange",document.selection.createRange()):t(this).data("currentRange",null)},restoreSelection:function(e,a){var n=t(this).data("currentRange");if(n){if(window.getSelection){if(e){if(n.deleteContents(),"html"==a){var i=document.createElement("div");i.innerHTML=e;for(var l,o,r=document.createDocumentFragment();l=i.firstChild;)o=r.appendChild(l);n.insertNode(r)}else n.insertNode(document.createTextNode(e))}(sel=window.getSelection()).removeAllRanges(),sel.addRange(n)}else document.selection&&n.select&&(n.select(),e&&("html"==a?n.pasteHTML(e):n.text=e))}},restoreIESelection:function(){var e=t(this).data("currentRange");e&&(window.getSelection?((sel=window.getSelection()).removeAllRanges(),sel.addRange(e)):document.selection&&e.select&&e.select())},insertTextAtSelection:function(t,e){var a,n,i;if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(n=a.getRangeAt(0)).deleteContents();var l=document.createTextNode(t);if("html"==e){var o=document.createElement("div");o.innerHTML=t;for(var i,r,s=document.createDocumentFragment();i=o.firstChild;)r=s.appendChild(i);n.insertNode(s)}else n.insertNode(l),n.selectNode(l);a.removeAllRanges(),(n=n.cloneRange()).collapse(!1),a.addRange(n)}}else document.selection&&document.selection.createRange&&((n=document.selection.createRange()).pasteHTML(t),n.select())},imageWidget:function(){var e=this.attr("id"),n=t("<div/>",{class:"row"}).append(t("<div/>",{id:"imgErrMsg_"+e})),i=t("<div/>",{class:"tabbable tabs-left"}),l=t("<ul/>",{class:"nav nav-tabs"}).append(t("<li/>",{class:"active"}).append(t("<a/>",{href:"#uploadImageBar_"+e,"data-toggle":"tab"}).html("From Computer"))).append(t("<li/>").append(t("<a/>",{href:"#imageFromLinkBar_"+e,"data-toggle":"tab"}).html("From URL"))),o=t("<div/>",{class:"tab-content"}),r=t("<div/>",{id:"uploadImageBar_"+e,class:"tab-pane active"});handleFileSelect=function(n){for(var i,l=n.target.files,o=0;i=l[o];o++){if(!i.type.match("image.*")||!i.name.match(/(?:gif|jpg|png|jpeg)$/)){a.showMessage.apply(this,["imgErrMsg_"+e,"Invalid file type"]);continue}var r=new FileReader;r.onload=function(a){return function(n){var i=t("<li/>",{class:"col-xs-12 col-sm-6 col-md-3 col-lg-3"}),l=t("<a/>",{href:"javascript:void(0)",class:"thumbnail"});t("<img/>",{src:n.target.result,title:escape(a.name)}).appendTo(l).click(function(){t("#imageList_"+e).data("current",t(this).attr("src"))}),i.append(l).appendTo(t("#imageList_"+e))}}(i),r.readAsDataURL(i)}};var s=t("<input/>",{type:"file",class:"inline-form-control",multiple:"multiple"});s.on("change",handleFileSelect),r.append(s);var d=t("<div/>",{id:"imageFromLinkBar_"+e,class:"tab-pane"}),c=t("<div/>",{class:"input-group"});t("<input/>",{type:"url",class:"form-control",id:"imageURL_"+e,placeholder:"Enter URL"}).appendTo(c),t("<button/>",{class:"btn btn-success",type:"button"}).html("Go!").click(function(){var n=t("#imageURL_"+e).val();if(""==n)return a.showMessage.apply(this,["imgErrMsg_"+e,"Please enter image url"]),!1;var i=t("<li/>",{class:"span6 col-xs-12 col-sm-6 col-md-3 col-lg-3"}),l=t("<a/>",{href:"javascript:void(0)",class:"thumbnail"});t("<img/>",{src:n}).error(function(){return a.showMessage.apply(this,["imgErrMsg_"+e,"Invalid image url"]),!1}).load(function(){t(this).appendTo(l).click(function(){t("#imageList_"+e).data("current",t(this).attr("src"))}),i.append(l).appendTo(t("#imageList_"+e))})}).appendTo(t("<span/>",{class:"input-group-btn form-control-button-right"}).appendTo(c)),d.append(c),o.append(r).append(d),i.append(l).append(o);var p=t("<div/>",{class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"});return t("<ul/>",{class:"thumbnails padding-top list-unstyled",id:"imageList_"+e}).appendTo(p),n.append(i).append(p),n},tableWidget:function(a){var n="_"+t(this).attr("id");return void 0!==a&&(n="_"+e.attr("id")+"_Edt"),t("<div/>",{class:"row-fluid"}).append(t("<div/>",{id:"tblErrMsg"+n})).append(t("<form/>",{id:"tblForm"+n}).append(t("<div/>",{class:"row"}).append(t("<div/>",{id:"tblInputsLeft"+n,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(t("<label/>",{for:"tblRows"+n,text:"Rows"})).append(t("<input/>",{id:"tblRows"+n,type:"text",class:"form-control form-control-width",value:2})).append(t("<label/>",{for:"tblColumns"+n,text:"Columns"})).append(t("<input/>",{id:"tblColumns"+n,type:"text",class:"form-control form-control-width",value:2})).append(t("<label/>",{for:"tblWidth"+n,text:"Width"})).append(t("<input/>",{id:"tblWidth"+n,type:"text",class:"form-control form-control-width",value:400})).append(t("<label/>",{for:"tblHeight"+n,text:"Height"})).append(t("<input/>",{id:"tblHeight"+n,type:"text",class:"form-control form-control-width"}))).append(t("<div/>",{id:"tblInputsRight"+n,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(t("<label/>",{for:"tblAlign"+n,text:"Alignment"})).append(t("<select/>",{id:"tblAlign"+n,class:"form-control form-control-width"}).append(t("<option/>",{text:"Choose",value:""})).append(t("<option/>",{text:"Left",value:"left"})).append(t("<option/>",{text:"Center",value:"center"})).append(t("<option/>",{text:"Right",value:"right"}))).append(t("<label/>",{for:"tblBorder"+n,text:"Border size"})).append(t("<input/>",{id:"tblBorder"+n,type:"text",class:"form-control form-control-width",value:1})).append(t("<label/>",{for:"tblCellspacing"+n,text:"Cell spacing"})).append(t("<input/>",{id:"tblCellspacing"+n,type:"text",class:"form-control form-control-width",value:1})).append(t("<label/>",{for:"tblCellpadding"+n,text:"Cell padding"})).append(t("<input/>",{id:"tblCellpadding"+n,type:"text",class:"form-control form-control-width",value:1})))))},imageAttributeWidget:function(){return t("<div/>",{class:"row-fluid"}).append(t("<div/>",{id:"imageErrMsg"})).append(t("<input/>",{id:"imgAlt",type:"text",class:"form-control form-control-link ",placeholder:"Alt Text"})).append(t("<input/>",{id:"imgTarget",class:"form-control form-control-link ",type:"text",placeholder:"Link Target"})).append(t("<input/>",{id:"imgHidden",type:"hidden"}))},getHTMLTable:function(e,a,n){for(var i=t("<table/>",{class:"table"}),l=0;l<n.length;l++)""!=n[l].value&&("width"==n[l].attribute||"height"==n[l].attribute?i.css(n[l].attribute,n[l].value):i.attr(n[l].attribute,n[l].value));for(var l=1;l<=e;l++){for(var o=t("<tr/>"),r=1;r<=a;r++)t("<td/>").html("&nbsp;").appendTo(o);o.appendTo(i)}return i},init:function(n){(void 0===t(this).attr("id")||""===t(this).attr("id"))&&t(this).attr("id",Date.now());var i=[{name:"Black",hex:"#000000"},{name:"MediumBlack",hex:"#444444"},{name:"LightBlack",hex:"#666666"},{name:"DimBlack",hex:"#999999"},{name:"Gray",hex:"#CCCCCC"},{name:"DimGray",hex:"#EEEEEE"},{name:"LightGray",hex:"#F3F3F3"},{name:"White",hex:"#FFFFFF"},{name:"libreak",hex:null},{name:"Red",hex:"#FF0000"},{name:"Orange",hex:"#FF9900"},{name:"Yellow",hex:"#FFFF00"},{name:"Lime",hex:"#00FF00"},{name:"Cyan",hex:"#00FFFF"},{name:"Blue",hex:"#0000FF"},{name:"BlueViolet",hex:"#8A2BE2"},{name:"Magenta",hex:"#FF00FF"},{name:"libreak",hex:null},{name:"LightPink",hex:"#FFB6C1"},{name:"Bisque",hex:"#FCE5CD"},{name:"BlanchedAlmond",hex:"#FFF2CC"},{name:"LightLime",hex:"#D9EAD3"},{name:"LightCyan",hex:"#D0E0E3"},{name:"AliceBlue",hex:"#CFE2F3"},{name:"Lavender",hex:"#D9D2E9"},{name:"Thistle",hex:"#EAD1DC"},{name:"LightCoral",hex:"#EA9999"},{name:"Wheat",hex:"#F9CB9C"},{name:"NavajoWhite",hex:"#FFE599"},{name:"DarkSeaGreen",hex:"#B6D7A8"},{name:"LightBlue",hex:"#A2C4C9"},{name:"SkyBlue",hex:"#9FC5E8"},{name:"LightPurple",hex:"#B4A7D6"},{name:"PaleVioletRed",hex:"#D5A6BD"},{name:"IndianRed",hex:"#E06666"},{name:"LightSandyBrown",hex:"#F6B26B"},{name:"Khaki",hex:"#FFD966"},{name:"YellowGreen",hex:"#93C47D"},{name:"CadetBlue",hex:"#76A5AF"},{name:"DeepSkyBlue",hex:"#6FA8DC"},{name:"MediumPurple",hex:"#8E7CC3"},{name:"MediumVioletRed",hex:"#C27BA0"},{name:"Crimson",hex:"#CC0000"},{name:"SandyBrown",hex:"#E69138"},{name:"Gold",hex:"#F1C232"},{name:"MediumSeaGreen",hex:"#6AA84F"},{name:"Teal",hex:"#45818E"},{name:"SteelBlue",hex:"#3D85C6"},{name:"SlateBlue",hex:"#674EA7"},{name:"VioletRed",hex:"#A64D79"},{name:"Brown",hex:"#990000"},{name:"Chocolate",hex:"#B45F06"},{name:"GoldenRod",hex:"#BF9000"},{name:"Green",hex:"#38761D"},{name:"SlateGray",hex:"#134F5C"},{name:"RoyalBlue",hex:"#0B5394"},{name:"Indigo",hex:"#351C75"},{name:"Maroon",hex:"#741B47"},{name:"DarkRed",hex:"#660000"},{name:"SaddleBrown",hex:"#783F04"},{name:"DarkGoldenRod",hex:"#7F6000"},{name:"DarkGreen",hex:"#274E13"},{name:"DarkSlateGray",hex:"#0C343D"},{name:"Navy",hex:"#073763"},{name:"MidnightBlue",hex:"#20124D"},{name:"DarkMaroon",hex:"#4C1130"}],l=[{name:"Exclamation ",text:"!"},{name:"At",text:"@"},{name:"Hash",text:"#"},{name:"Percentage",text:"%"},{name:"Uppercase",text:"^"},{name:"Ampersand",text:"&"},{name:"Asterisk",text:"*"},{name:"OpenBracket",text:"("},{name:"CloseBracket",text:")"},{name:"Underscore",text:"_"},{name:"Hiphen",text:"-"},{name:"Plus",text:"+"},{name:"Equalto",text:"="},{name:"OpenSquareBracket",text:"["},{name:"CloseSquareBracket",text:"]"},{name:"OpenCurly",text:"{"},{name:"CloseCurly",text:"}"},{name:"Pipe",text:"|"},{name:"Colon",text:":"},{name:"Semicolon",text:";"},{name:"Single quote",text:"&#39;"},{name:"Double quote",text:"&#34;"},{name:"Left single curly quote",text:"&lsquo;"},{name:"right single curly quote",text:"&rsquo;"},{name:"Forward-slash",text:"&#47;"},{name:"Back-slash",text:"&#92;"},{name:"LessThan",text:"<"},{name:"GreaterThan",text:">"},{name:"QuestionMark",text:"?"},{name:"Tilda",text:"~"},{name:"Grave accent",text:"`"},{name:"Micron",text:"&micro;"},{name:"Paragraph sign",text:"&para;"},{name:"Plus/minus",text:"&plusmn;"},{name:"Trademark",text:"&trade;"},{name:"Copyright",text:"&copy;"},{name:"Registered",text:"&reg;"},{name:"Section",text:"&sect;"},{name:"right double angle quotes",text:"&#187;"},{name:"fraction one quarter",text:"&#188;"},{name:"fraction one half",text:"&#189;"},{name:"fraction three quarters",text:"&#190;"},{name:"Dollar",text:"$"},{name:"Euro",text:"&euro;"},{name:"Pound",text:"&pound;"},{name:"Yen",text:"&yen;"},{name:"Cent",text:"&#162;"},{name:"IndianRupee",text:"&#8377;"},],o={fonteffects:!0,texteffects:!0,aligneffects:!0,textformats:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,fonts:{select:!0,default:"Font",tooltip:"Fonts",commandname:"fontName",custom:null},styles:{select:!0,default:"Formatting",tooltip:"Paragraph Format",commandname:"formatBlock",custom:null},font_size:{select:!0,default:"Font size",tooltip:"Font Size",commandname:"fontSize",custom:null},color:{text:"A",icon:"fa fa-font",tooltip:"Text/Background Color",commandname:null,custom:function(e){var n=t(this),l=0,o=t("<div/>",{id:"paletteCntr",class:"activeColour",css:{display:"none",width:"335px"}}).click(function(t){t.stopPropagation()}),r=t("<div/>",{id:"colorpellete"}),s=t("<ul />",{id:"color_ui"}).append(t("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Text Color</div>")),d=t("<div/>",{id:"bg_colorpellete"}),c=t("<ul />",{id:"bgcolor_ui"}).append(t("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Background Color</div>"));if(n.data("colorBtn")?(l=1,n.data("colorBtn",null)):n.data("colorBtn",1),0==l){for(var p=0;p<i.length;p++)null!=i[p].hex?(s.append(t("<li />").css("background-color",i[p].hex).mousedown(function(t){t.preventDefault()}).click(function(){var e=a.rgbToHex.apply(this,[t(this).css("background-color")]);a.restoreSelection.apply(this),a.setStyleWithCSS.apply(this),document.execCommand("forecolor",!1,e),t("#paletteCntr").remove(),n.data("colorBtn",null)})),c.append(t("<li />").css("background-color",i[p].hex).mousedown(function(t){t.preventDefault()}).click(function(){var e=a.rgbToHex.apply(this,[t(this).css("background-color")]);a.restoreSelection.apply(this),a.setStyleWithCSS.apply(this),document.execCommand("backColor",!1,e),t("#paletteCntr").remove(),n.data("colorBtn",null)}))):(s.append(t("<li />").css({width:"145px",display:"Block",height:"5px"})),c.append(t("<li />").css({width:"145px",display:"Block",height:"5px"})));s.appendTo(r),c.appendTo(d),r.appendTo(o),d.appendTo(o),o.insertAfter(e),t("#paletteCntr").slideDown("slow")}else t("#paletteCntr").remove()}},bold:{text:"B",icon:"fa fa-bold",tooltip:"Bold",commandname:"bold",custom:null},italics:{text:"I",icon:"fa fa-italic",tooltip:"Italics",commandname:"italic",custom:null},underline:{text:"U",icon:"fa fa-underline",tooltip:"Underline",commandname:"underline",custom:null},strikeout:{text:"Strikeout",icon:"fa fa-strikethrough",tooltip:"Strike Through",commandname:"strikeThrough",custom:null},ol:{text:"N",icon:"fa fa-list-ol",tooltip:"Insert/Remove Numbered List",commandname:"insertorderedlist",custom:null},ul:{text:"Bullet",icon:"fa fa-list-ul",tooltip:"Insert/Remove Bulleted List",commandname:"insertunorderedlist",custom:null},undo:{text:"undo",icon:"fa fa-undo",tooltip:"Undo",commandname:"undo",custom:null},redo:{text:"redo",icon:"fa fa-repeat",tooltip:"Redo",commandname:"redo",custom:null},l_align:{text:"leftalign",icon:"fa fa-align-left",tooltip:"Align Left",commandname:"justifyleft",custom:null},r_align:{text:"rightalign",icon:"fa fa-align-right",tooltip:"Align Right",commandname:"justifyright",custom:null},c_align:{text:"centeralign",icon:"fa fa-align-center",tooltip:"Align Center",commandname:"justifycenter",custom:null},justify:{text:"justify",icon:"fa fa-align-justify",tooltip:"Justify",commandname:"justifyfull",custom:null},unlink:{text:"Unlink",icon:"fa fa-unlink",tooltip:"Unlink",commandname:"unlink",custom:null},insert_link:{modal:!0,modalId:"InsertLink_"+t(this).attr("id"),icon:"fa fa-link",tooltip:"Insert Link",modalHeader:"Insert Hyperlink",modalBody:t("<div/>",{class:"form-group"}).append(t("<div/>",{id:"errMsg_"+t(this).attr("id")})).append(t("<input/>",{type:"text",id:"inputText_"+t(this).attr("id"),class:"form-control form-control-link ",placeholder:"Text to Display"})).append(t("<input/>",{type:"text",id:"inputUrl_"+t(this).attr("id"),required:!0,class:"form-control form-control-link",placeholder:"Enter URL"})),beforeLoad:function(){e=this;var a="_"+this.attr("id");t("#inputText"+a),t("#inputUrl"+a),t(".alert").alert("close"),""!=t(e).data("currentRange")&&t("#inputText_"+a).val(t(e).data("currentRange"))},onSave:function(){var n="_"+e.attr("id"),i=t("#inputText"+n).val(),l=t("#inputUrl"+n).val(),o=t(e).data("currentRange");if(""==l)return a.showMessage.apply(e,["errMsg","Please enter url"]),!1;if(!l.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))return a.showMessage.apply(e,["errMsg","Enter valid url"]),!1;if(""==o&&""==i&&(i=l),navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)){var r='<a href="'+l+'" target="_blank">'+i+"</a>";a.restoreSelection.apply(e,[r,"html"])}else a.restoreSelection.apply(e,[i]),document.execCommand("createLink",!1,l);return t(e).data("editor").find('a[href="'+l+'"]').each(function(){t(this).attr("target","_blank")}),t(".alert").alert("close"),t("#InsertLink"+n).modal("hide"),t(e).data("editor").focus(),!1}},insert_img:{modal:!0,modalId:"InsertImage_"+t(this).attr("id"),icon:"fa-regular fa-image",tooltip:"Insert Image",modalHeader:"Insert Image",modalBody:a.imageWidget.apply(this),beforeLoad:function(){e=this;var a=e.attr("id");t("#imageURL_"+a).val(""),t("#uploadImageBar_"+a+" :input").val(""),t("#imageList_"+a).data("current","")},onSave:function(){var n="_"+e.attr("id");if(a.restoreSelection.apply(this),!t("#imageList"+n).data("current"))return a.showMessage.apply(this,["imgErrMsg"+n,"Please select an image"]),!1;if(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)){var i='<img src="'+t("#imageList"+n).data("current")+'"/>';a.restoreSelection.apply(this,[i,"html"])}else document.execCommand("insertimage",!1,t("#imageList"+n).data("current"));t("#InsertImage"+n).modal("hide"),t(this).data("editor").focus()}},insert_table:{modal:!0,modalId:"InsertTable_"+t(this).attr("id"),icon:"fa fa-table",tooltip:"Insert Table",modalHeader:"Insert Table",modalBody:a.tableWidget.apply(this),beforeLoad:function(){e=this,t("#tblForm_"+e.attr("id")).each(function(){this.reset()})},onSave:function(){_idSuffix="_"+e.attr("id"),a.restoreSelection.apply(this);var n=t("#tblRows"+_idSuffix).val(),i=t("#tblColumns"+_idSuffix).val(),l=t("#tblWidth"+_idSuffix).val(),o=t("#tblHeight"+_idSuffix).val(),r=t("#tblAlign"+_idSuffix).val(),s=t("#tblBorder"+_idSuffix).val(),d=t("#tblCellspacing"+_idSuffix).val(),c=t("#tblCellpadding"+_idSuffix).val(),p=/^[0-9]+$/,m=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/ig,u=/^[0-9]+\.?([0-9])?$/;if(!n.match(p))return a.showMessage.apply(this,["tblErrMsg","Rows must be a positive number"]),!1;if(!i.match(p))return a.showMessage.apply(this,["tblErrMsg","Columns must be a positive number"]),!1;if(""!=l&&!l.match(m)||""!=o&&!o.match(m))return a.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1;if(""!=s&&!s.match(u))return a.showMessage.apply(this,["tblErrMsg","Border size must be a positive number"]),!1;if(""!=d&&!d.match(u))return a.showMessage.apply(this,["tblErrMsg","Cell spacing must be a positive number"]),!1;if(""!=c&&!c.match(u))return a.showMessage.apply(this,["tblErrMsg","Cell padding must be a positive number"]),!1;var h=t("<div/>");a.getHTMLTable.apply(this,[n,i,[{attribute:"align",value:r},{attribute:"border",value:s},{attribute:"cellspacing",value:d},{attribute:"cellpadding",value:c},{attribute:"width",value:l},{attribute:"height",value:o},]]).appendTo(h),navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)?a.restoreSelection.apply(this,[h.html(),"html"]):document.execCommand("insertHTML",!1,h.html()),t("#InsertTable"+_idSuffix).modal("hide"),t(this).data("editor").focus()}},hr_line:{text:"HR",icon:"fa fa-minus",tooltip:"Horizontal Rule",commandname:"insertHorizontalRule",custom:null},block_quote:{text:"Block Quote",icon:"fa fa-quote-right",tooltip:"Block Quote",commandname:null,custom:function(){a.setStyleWithCSS.apply(this),navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)?document.execCommand("indent",!1,null):document.execCommand("formatBlock",!1,"<blockquote>")}},indent:{text:"Indent",icon:"fa fa-indent",tooltip:"Increase Indent",commandname:"indent",custom:null},outdent:{text:"Outdent",icon:"fa fa-outdent",tooltip:"Decrease Indent",commandname:"outdent",custom:null},print:{text:"Print",icon:"fa fa-print",tooltip:"Print",commandname:null,custom:function(){oDoc=t(this).data("editor");var e=window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");e.document.open(),e.document.write('<!DOCTYPE html><html><head><title>Print</title></head><body onload="print();">'+oDoc.html()+"</body></html>"),e.document.close()}},rm_format:{text:"Remove format",icon:"fa fa-eraser",tooltip:"Remove Formatting",commandname:"removeformat",custom:null},select_all:{text:"Select all",icon:"fa fa-file-text",tooltip:"Select All",commandname:null,custom:function(){document.execCommand("selectall",null,null)}},togglescreen:{text:"Toggle Screen",icon:"fa fa-arrows-alt",tooltip:"Toggle Screen",commandname:null,custom:function(e,a){t(this).data("editor").parent().toggleClass("fullscreen");var n=0;t(this).data("statusBar").length&&(n=t(this).data("statusBar").height()),t(this).data("editor").parent().hasClass("fullscreen")?t(this).data("editor").css({height:t(this).data("editor").parent().height()-(t(this).data("menuBar").height()+n)-13}):t(this).data("editor").css({height:""})}},splchars:{text:"S",icon:"fa fa-asterisk",tooltip:"Insert Special Character",commandname:null,custom:function(e){a.restoreIESelection.apply(this);var n=0,i=t("<div/>",{id:"specialchar",class:"specialCntr",css:{display:"none"}}).click(function(t){t.stopPropagation()}),o=t("<ul />",{id:"special_ui"}),r=this;if(t(this).data("editor").data("splcharsBtn")?(n=1,t(this).data("editor").data("splcharsBtn",null)):t(this).data("editor").data("splcharsBtn",1),0==n){for(var s=0;s<l.length;s++)o.append(t("<li />").html(l[s].text).attr("title",l[s].name).mousedown(function(t){t.preventDefault()}).click(function(e){if(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Windows NT.*Trident\//)){var n=t(this).html();a.insertTextAtSelection.apply(this,[n,"html"])}else document.execCommand("insertHTML",!1,t(this).html());t("#specialchar").remove(),t(r).data("editor").data("splcharsBtn",null)}));o.prependTo(i),i.insertAfter(e),t("#specialchar").slideDown("slow")}else t("#specialchar").remove()}},source:{text:"Source",icon:"fa fa-code",tooltip:"Source",commandname:null,custom:function(t,e){a.getSource.apply(this,[t,e])}},params:{obj:null}},r={texteffects:["bold","italics","underline","color"],aligneffects:["l_align","c_align","r_align","justify"],textformats:["indent","outdent","block_quote","ol","ul"],fonteffects:["fonts","styles","font_size"],actions:["undo","redo"],insertoptions:["insert_link","unlink","insert_img","insert_table"],extraeffects:["strikeout","hr_line","splchars"],advancedoptions:["print","rm_format","select_all","source"],screeneffects:["togglescreen"]},s=t.extend({texteffects:!0,aligneffects:!0,textformats:!0,fonteffects:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,bold:!0,italics:!0,underline:!0,ol:!0,ul:!0,undo:!0,redo:!0,l_align:!0,r_align:!0,c_align:!0,justify:!0,insert_link:!0,unlink:!0,insert_img:!0,hr_line:!0,block_quote:!0,source:!0,strikeout:!0,indent:!0,outdent:!0,fonts:!1,styles:!1,print:!0,rm_format:!0,status_bar:!0,font_size:!1,color:i,splchars:l,insert_table:!0,select_all:!0,togglescreen:!0},n),d=t("<div/>",{class:"row-fluid Editor-container"});t(this).hide().after(d);var c=t("<div/>",{id:"menuBarDiv_"+t(this).attr("id"),class:"row-fluid line-control-menu-bar"}).prependTo(d),p=t("<div/>",{class:"Editor-editor",css:{overflow:"auto"},contenteditable:"true"}).appendTo(d),m=t("<div/>",{id:"statusbar_"+t(this).attr("id"),class:"row-fluid line-control-status-bar",unselectable:"on"}).appendTo(d);t(this).data("menuBar",c),t(this).data("editor",p),t(this).data("statusBar",m);var u=this;for(var h in s.status_bar&&p.keyup(function(e){var n=a.getWordCount.apply(u),i=a.getCharCount.apply(u);t(u).data("statusBar").html('<div class="label">Words : '+n+"</div>"),t(u).data("statusBar").append('<div class="label">Characters : '+i+"</div>")}),o){if(!s[h]){if(s[h]in r)for(var g in r[h])s[g]=!1;continue}if(h in r){for(var f=t("<div/>",{class:"btn-group"}),v=0;v<r[h].length;v++){var x=r[h][v];if(s[x]){var b=a.createMenuItem.apply(this,[o[x],s[x],!0]);f.append(b)}s[x]=!1}c.append(f)}else{var b=a.createMenuItem.apply(this,[o[h],s[h],!0]);c.append(b)}}p.bind("contextmenu",function(e){t("#context-menu").length&&t("#context-menu").remove();var n=t("<div/>",{id:"context-menu"}).css({position:"absolute",top:e.pageY,left:e.pageX,"z-index":9999}).click(function(t){t.stopPropagation()}),i=t("<ul/>",{class:"dropdown-menu on",role:"menu"});e.preventDefault(),t(e.target).is("a")?(a.createLinkContext.apply(this,[e,i]),i.appendTo(n),n.appendTo("body")):t(e.target).is("td")||t(e.target).is("th")?(a.createTableContext.apply(this,[e,i]),i.appendTo(n),n.appendTo("body")):t(e.target).is("img")&&(a.createImageContext.apply(this,[e,i]),i.appendTo(n),n.appendTo("body"))})},createLinkContext:function(e,a){var n;t("<li/>").append(t("<a/>",{id:"rem_link",href:"javascript:void(0)",text:"RemoveLink"}).click((n=e,function(){t(n.target).contents().unwrap(),t("#context-menu").remove()}))).appendTo(a)},createImageContext:function(n,i){var l,o="imgAttribute",r=a.imageAttributeWidget.apply(this,["edit"]),s=function(){var n=t("#imgAlt").val(),i=t("#imgTarget").val();if(""==n)return a.showMessage.apply(this,["imageErrMsg","Please enter image alternative text"]),!1;if(""!=i&&!i.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))return a.showMessage.apply(this,["imageErrMsg","Please enter valid url"]),!1;if(""!=t("#imgHidden").val()){var l=t("#imgHidden").val();t("#"+l).attr("alt",n),""!=i?t("#wrap_"+l).length?t("#wrap_"+l).attr("href",i):t("#"+l).wrap(t("<a/>",{id:"wrap_"+l,href:i,target:"_blank"})):t("#wrap_"+l).length&&t("#"+l).unwrap()}t("#imgAttribute").modal("hide"),e.data("editor").focus()};a.createModal.apply(this,[o,"Image Attributes",r,s]);var d,c=t("<a/>",{href:"#"+o,text:"Image Attributes","data-toggle":"modal"}).click((l=n,function(){t("#context-menu").remove();var e=(new Date).getTime();if(t("#imgAlt").val(t(l.target).closest("img").attr("alt")),t("#imgTarget").val(""),void 0!==t(l.target).closest("img").attr("id")){var a=t(l.target).closest("img").attr("id");t("#imgHidden").val(a),t("#wrap_"+a).length?t("#imgTarget").val(t("#wrap_"+a).attr("href")):t("#imgTarget").val("")}else t(l.target).closest("img").attr("id","img_"+e),t("#imgHidden").val("img_"+e)}));i.append(t("<li/>").append(c)).append(t("<li/>").append(t("<a/>",{text:"Remove Image"}).click((d=n,function(){t("#context-menu").remove(),t(d.target).closest("img").remove()}))))},createTableContext:function(n,i){var l="_"+e.attr("id")+"_Edt",o="editProperties_"+e.attr("id");t("#"+o).remove();var r,s=a.tableWidget.apply(this,["edit"]),d=function(){var i=t("#tblWidth"+l).val(),r=t("#tblHeight"+l).val(),s=t("#tblBorder"+l).val(),d=t("#tblAlign"+l).val(),c=t("#tblCellspacing"+l).val(),p=t("#tblCellpadding"+l).val(),m=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/ig,u=/^[0-9]+\.?([0-9])?$/;return(""==i||i.match(m))&&(""==r||r.match(m))?""==s||s.match(u)?""==c||c.match(u)?""==p||p.match(u)?void(t(n.target).closest("table").css("width",i),""!=r&&t(n.target).closest("table").css("height",r),t(n.target).closest("table").attr("align",d),t(n.target).closest("table").attr("border",s),t(n.target).closest("table").attr("cellspacing",c),t(n.target).closest("table").attr("cellpadding",p),t("#"+o).modal("hide"),e.data("editor").focus()):(a.showMessage.apply(this,["tblErrMsgEdt","Cell padding must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Cell spacing must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Border size must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1)};a.createModal.apply(this,[o,"Table Properties",s,d]);var c,p,m,u,h,g=t("<a/>",{href:"#"+o,text:"Table Properties","data-toggle":"modal"}).click((r=n,function(){var a="_"+e.attr("id")+"_Edt";t("#context-menu").remove(),t("#tblRows"+a).val(t(r.target).closest("table").prop("rows").length),t("#tblColumns"+a).val(t(r.target).closest("table").find("tr")[0].cells.length),t("#tblRows"+a).attr("disabled","disabled"),t("#tblColumns"+a).attr("disabled","disabled"),t("#tblWidth"+a).val(t(r.target).closest("table").get(0).style.width),t("#tblHeight"+a).val(t(r.target).closest("table").get(0).style.height),t("#tblAlign"+a).val(t(r.target).closest("table").attr("align")),t("#tblBorder"+a).val(t(r.target).closest("table").attr("border")),t("#tblCellspacing"+a).val(t(r.target).closest("table").attr("cellspacing")),t("#tblCellpadding"+a).val(t(r.target).closest("table").attr("cellpadding"))}));i.append(t("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(t("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Row"})).append(t("<ul/>",{class:"dropdown-menu"}).append(t("<li/>").append(t("<a/>",{id:"tbl_addrow",href:"javascript:void(0)",text:"Add Row"}).click((c=n,function(){t("#context-menu").remove();var e=t(c.target).closest("tr"),a=t("<tr/>");e.children().each(function(){var e=t("<"+t(this).prop("nodeName")+"/>").html("&nbsp;");a.append(e)}),e.after(a)})))).append(t("<li/>").append(t("<a/>",{text:"Remove Row"}).click((p=n,function(){t("#context-menu").remove(),t(p.target).closest("tr").remove()})))))).append(t("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(t("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Column"})).append(t("<ul/>",{class:"dropdown-menu"}).append(t("<li/>").append(t("<a/>",{id:"tbl_addcolumn",href:"javascript:void(0)",text:"Add Column"}).click((m=n,function(){t("#context-menu").remove();var e=t(m.target),a=e.siblings().addBack().index(e);e.closest("table").find("tr").each(function(){var e=t(this).children(":eq("+a+")"),n=t("<"+e.prop("nodeName")+"/>").html("&nbsp;");e.after(n)})})))).append(t("<li/>").append(t("<a/>",{text:"Remove Column"}).click((u=n,function(){t("#context-menu").remove();var e=t(u.target),a=e.siblings().addBack().index(e);e.closest("table").find("tr").each(function(){t(this).children(":eq("+a+")").remove()})})))))),i.append(t("<li/>").append(g)).append(t("<li/>",{class:"divider"})).append(t("<li/>").append(t("<a/>",{text:"Remove Table"}).click((h=n,function(){t("#context-menu").remove(),t(h.target).closest("table").remove()}))))},createModal:function(e,a,n,i){var l,o=t("<a/>",{href:"#"+e,role:"button",class:"btn btn-default","data-toggle":"modal"});return t("<div/>",{id:e,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"h3_"+e,"aria-hidden":"true"}).append(t("<div>",{class:"modal-dialog"}).append(t("<div>",{class:"modal-content"}).append(t("<div>",{class:"modal-header"}).append(t("<button/>",{type:"button",class:"close","data-dismiss":"modal","aria-hidden":"true"}).html("x")).append(t("<h3/>",{id:"h3_"+e}).html(a))).append(t("<div>",{class:"modal-body"}).append(n)).append(t("<div>",{class:"modal-footer"}).append(t("<button/>",{type:"button",class:"btn btn-default","data-dismiss":"modal","aria-hidden":"true"}).html("Cancel")).append(t("<button/>",{type:"button",class:"btn btn-success"}).html("Done").mousedown(function(t){t.preventDefault()}).click((l=this,function(){i.apply(l)})))))).appendTo("body"),o},createMenuItem:function(e,n,i){if(e.select){var l,o,r=t("<div/>",{class:"btn-group"}),s=t("<ul/>",{class:"dropdown-menu"});r.append(t("<a/>",{class:"btn btn-default dropdown-toggle","data-toggle":"dropdown",href:"javascript:void(0)",title:e.tooltip}).html(e.default).append(t("<span/>",{class:"caret"})).mousedown(function(t){t.preventDefault()})),t.each(n,function(e,a){var n=t("<li/>");t("<a/>",{tabindex:"-1",href:"javascript:void(0)"}).html(e).appendTo(n),n.click(function(){t(this).parent().parent().data("value",a),t(this).parent().parent().trigger("change")}),s.append(n)});var d="change"}else if(e.modal){var c,p,m,r=a.createModal.apply(this,[e.modalId,e.modalHeader,e.modalBody,e.onSave]),s=t("<i/>");return e.icon?s.addClass(e.icon):s.html(e.text),r.append(s),r.mousedown((c=this,p=a,m=e.beforeLoad,function(t){t.preventDefault(),p.saveSelection.apply(c),m&&m.apply(c)})),r.attr("title",e.tooltip),r}else{var r=t("<a/>",{href:"javascript:void(0)",class:"btn btn-default"}),s=t("<i/>");e.icon?s.addClass(e.icon):s.html(e.text);var d="click"}if(e.custom?r.bind(d,(l=this,o=e.params,function(){a.saveSelection.apply(l),e.custom.apply(l,[t(this),o])})):(r.data("commandName",e.commandname),r.data("editor",t(this).data("editor")),r.bind(d,function(){a.setTextFormat.apply(this)})),r.attr("title",e.tooltip),r.css("cursor","pointer"),r.append(s),i)return r;t(this).data("menuBar").append(r)},setTextFormat:function(){return a.setStyleWithCSS.apply(this),document.execCommand(t(this).data("commandName"),!1,t(this).data("value")||null),t(this).data("editor").focus(),!1},getSource:function(e,a){var n,i=0;e.data("state")?(i=1,e.data("state",null)):e.data("state",1),t(this).data("source-mode",!i);var l=t(this).data("editor");if(0==i)n=document.createTextNode(l.html()),l.empty(),l.attr("contenteditable",!1),(preElement=t("<pre/>",{contenteditable:!0})).append(n),l.append(preElement),e.parent().siblings().hide(),e.siblings().hide();else{var o=l.children().first().text();l.html(o),l.attr("contenteditable",!0),e.parent().siblings().show(),e.siblings().show()}},countWords:function(e){for(var n=0,i=e.contents().filter(function(){return 3==this.nodeType}),l=0;l<i.length;l++)text=(text=i[l].textContent).replace(/[^-\w\s]/gi," "),text=t.trim(text),n+=text.split(/\s+/).length;return e.children().each(function(){n+=a.countWords.apply(this,[t(this)])}),n},countChars:function(e){for(var n=0,i=e.contents().filter(function(){return 3==this.nodeType}),l=0;l<i.length;l++)n+=(text=i[l].textContent).length;return e.children().each(function(){n+=a.countChars.apply(this,[t(this)])}),n},getWordCount:function(){return a.countWords.apply(this,[t(this).data("editor")])},getCharCount:function(){return a.countChars.apply(this,[t(this).data("editor")])},rgbToHex:function(t){return"#"+("0"+parseInt((t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)},showMessage:function(e,a){t("<div/>",{class:"alert alert-danger"}).append(t("<button/>",{type:"button",class:"close","data-dismiss":"alert",html:"x"})).append(t("<span/>").html(a)).appendTo(t("#"+e)),setTimeout(function(){t(".alert").alert("close")},3e3)},getText:function(){return t(this).data("source-mode")?t(this).data("editor").children().first().text():t(this).data("editor").html()},setText:function(e){t(this).data("source-mode")?t(this).data("editor").children().first().text(e):t(this).data("editor").html(e)},setStyleWithCSS:function(){if(navigator.userAgent.match(/MSIE/i))try{Editor.execCommand("styleWithCSS",0,!1)}catch(t){try{Editor.execCommand("useCSS",0,!0)}catch(e){try{Editor.execCommand("styleWithCSS",!1,!1)}catch(a){}}}else document.execCommand("styleWithCSS",null,!0)}};t.fn.Editor=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.Editor"):a.init.apply(this,arguments)}}(jQuery);